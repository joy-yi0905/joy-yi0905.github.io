<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>

  
  <meta name="author" content="易建勇,YI_joy">
  

  
  <meta name="description" content="HTML5离线存储 | 前端技术空间">
  

  
  <meta name="keywords" content="html5离线存储 manifest">
  

  

  <title>HTML5离线存储 | 前端技术空间</title>

  <link rel="stylesheet" href="/css/blog.css">
</head>
<body>

<div class="blog">

<div class="navigation">
  <ul class="nav-list">
    
      <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
    
      <li class="nav-item"><a class="nav-link" href="/archives">Archives</a></li>
    
  </ul>
</div>

<div class="post">

  <h1 class="post-title">HTML5离线存储</h1>

  <time class="post-time">2014-09-10</time>

  <div class="post-content">
    
<p>何为离线存储？或许你经常碰到手机没信号或者流量不够用的情况，又或者上班时分突然断网，当你尝试打开页面时，给你反馈的只有网络无法连接之类的提示。但是如果你之前打开过设置了离线存储的页面，那么你便可像有网络般浏览网页，这就是离线存储的功能，而且它可以缓存任何文件。</p>
<a id="more"></a>
<h2 id="离线存储原理"><a href="#离线存储原理" class="headerlink" title="离线存储原理"></a>离线存储原理</h2><p>在有网的情况，当一次访问设置了离线存储的网页时，服务器会根据离线的设置将有关，同时它也会根据离线设置将需要离线的文件发送一份到离线应用manifest。在没网的情况下，当用户再次访问页面时，则浏览器会直接从manifest读取，如图：</p>
<img src="/2014/09/10/h5-offline/offline-storage.jpg" title="离线存储图">
<h2 id="离线存储使用"><a href="#离线存储使用" class="headerlink" title="离线存储使用"></a>离线存储使用</h2><p><strong>第一步</strong></p>
<p>服务器设置头信息 AddType text/cache-manifest.manifest<br>在服务端文件夹里找到httpd.conf或.htaccess文件，在任意处加入代码：<br>AddType text/cache-manifest.manifest，然后重启服务器。</p>
<p><strong>第二步</strong></p>
<p>建立manifest文件。新建文本文档，然后将.txt后缀名改为.mainfest。假设此文件叫flower.mainfest，然后打开flower.mainfest，写入需要离线存储的清单，不过要先写CACHE MANIFEST，你也可以使用*存储全部，如下格式：</p>
<p>CACHE MANIFEST<br>flower.jpg<br>flower.css</p>
<p>你还可在flower.mainfest中加入FALLBACK和NETWORK : FALLBACK表示第一个网络地址没获取到，就读取第二个缓存文件。而NETWORK则表示不管离线与否都从服务器端请求。</p>
<p><strong>第三步</strong></p>
<p>最后，在需要缓存页面的html标签上加：manifest=”flower.manifest”</p>
<p>查看离线例子：<a href="/2014/09/10/h5-offline/offline-storage.html" title="忽地笑的介绍">忽地笑的介绍</a></p>

  </div>

</div>

  <div class="footer">
    <a href="http://www.yi-jy.com">前端技术空间--易建勇</a> /
    <a href="http://www.beianbeian.com/search/yi-jy.com">Copyright © 2012-2018</a> /
    <a href="https://github.com/joy-yi0905/hexo-theme-record">Record</a> /
    <a href="http://yi-jy.com/atom.xml">Rss</a>
  </div>

</div>

</body>


    <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?7d5550c80ba3b42cfa5323fc0e92699f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


</html>